<!DOCTYPE html>
<html>

<head>
  <title>Text to Chart Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .chart-form {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      background-color: #f1f1f1;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .chart-form label {
      margin-bottom: 10px;
    }

    .chart-form select,
    .chart-form input[type="color"] {
      margin-bottom: 10px;
    }

    .chart-container {
      width: 600px;
      height: 400px;
      margin-top: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
    }

    .chart-container svg {
      width: 100%;
      height: 100%;
    }

    .button {
      padding: 10px 20px;
      background-color: #003366;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .button:hover {
      background-color: #002b4d;
    }

    .zoom-buttons {
      margin-top: 20px;
    }

    .zoom-buttons button {
      margin-right: 10px;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
      background-color: #fefefe;
      margin: 20% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
      border-radius: 8px;
    }

    .modal-close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .modal-close:hover,
    .modal-close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="chart-form">
      <h2>Text to Chart Converter</h2>
      <label for="chartTypeSelect">Select Chart Type:</label>
      <select id="chartTypeSelect">
        <option value="bar">Bar Chart</option>
        <option value="line">Line Chart</option>
        <option value="pie">Pie Chart</option>
      </select>
      <label for="includeNamesSelect">Include Names:</label>
      <select id="includeNamesSelect">
        <option value="true">Yes</option>
        <option value="false">No</option>
      </select>
      <label for="includeNumberSelect">Include Numbers:</label>
      <select id="includeNumberSelect">
        <option value="true">Yes</option>
        <option value="false">No</option>
      </select>
      <label for="chartColorInput">Chart Color:</label>
      <input type="color" id="chartColorInput" value="#003366">
      <button class="button" onclick="generateChart()">Generate Chart</button>
      <div class="zoom-buttons">
        <button class="button" onclick="zoomIn()">Zoom In</button>
        <button class="button" onclick="zoomOut()">Zoom Out</button>
      </div>
    </div>
    <div class="chart-container" id="chartContainer"></div>
  </div>

  <!-- About TTC Modal -->
  <div id="modalAboutTTC" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('modalAboutTTC')">&times;</span>
      <h3>About TTC</h3>
      <p>
        Text to Chart Converter (TTC) is a tool that allows you to convert text data into interactive and visually
        appealing charts. It supports bar charts, line charts, and pie charts, and provides options to include names and
        numbers in the charts.
      </p>
      <p>
        TTC is developed by Word of Lio, a group dedicated to creating cool projects and exploring the world of coding,
        writing short stories, and journals.
      </p>
    </div>
  </div>

  <!-- About Word of Lio Modal -->
  <div id="modalAboutWordOfLio" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('modalAboutWordOfLio')">&times;</span>
      <h3>About Word of Lio</h3>
      <p>
        Word of Lio is a group focused on creating a cool future through innovative projects and learning in the fields of
        coding, writing, and creativity. Lio, short for Little Inventive One, is the creative mind behind the group and the
        TTC website.
      </p>
    </div>
  </div>

  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script>
    function generateChart() {
      var chartType = document.getElementById("chartTypeSelect").value;
      var includeNames = document.getElementById("includeNamesSelect").value === "true";
      var includeNumber = document.getElementById("includeNumberSelect").value === "true";
      var chartColor = document.getElementById("chartColorInput").value;

      var dataText = document.getElementById("dataInput").value;
      var dataArray = dataText.split("\n");

      switch (chartType) {
        case "bar":
          generateBarChart(dataArray, includeNames, includeNumber, chartColor);
          break;
        case "line":
          generateLineChart(dataArray, includeNames, includeNumber, chartColor);
          break;
        case "pie":
          generatePieChart(dataArray, includeNames);
          break;
      }
    }

    function generateBarChart(dataArray, includeNames, includeNumber, chartColor) {
      var chartData = [];

      for (var i = 0; i < dataArray.length; i++) {
        var item = dataArray[i].split(",");
        var value = includeNumber ? parseFloat(item[0]) : item[0];
        var label = includeNames ? item[1] : "";

        chartData.push({
          value: value,
          label: label
        });
      }

      chartContainer.innerHTML = "";

      var svg = d3
        .select("#chartContainer")
        .append("svg")
        .attr("width", "100%")
        .attr("height", "100%");

      var chartWidth = chartContainer.offsetWidth;
      var chartHeight = chartContainer.offsetHeight;
      var margin = {
        top: 20,
        right: 20,
        bottom: 40,
        left: 40
      };
      var width = chartWidth - margin.left - margin.right;
      var height = chartHeight - margin.top - margin.bottom;

      var chart = svg
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      var xScale = d3
        .scaleBand()
        .domain(chartData.map((d) => d.label))
        .range([0, width])
        .padding(0.2);

      var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(chartData, (d) => d.value)])
        .range([height, 0]);

      var bars = chart.selectAll(".bar")
        .data(chartData)
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("x", (d) => xScale(d.label))
        .attr("y", (d) => yScale(d.value))
        .attr("width", xScale.bandwidth())
        .attr("height", (d) => height - yScale(d.value))
        .attr("fill", chartColor);

      if (includeNumber) {
        var valueLabels = chart.selectAll(".value-label")
          .data(chartData)
          .enter()
          .append("text")
          .attr("class", "value-label")
          .attr("x", (d) => xScale(d.label) + xScale.bandwidth() / 2)
          .attr("y", (d) => yScale(d.value) - 5)
          .text((d) => d.value)
          .attr("text-anchor", "middle")
          .attr("fill", "#fff");
      }

      if (includeNames) {
        var nameLabels = chart.selectAll(".name-label")
          .data(chartData)
          .enter()
          .append("text")
          .attr("class", "name-label")
          .attr("x", (d) => xScale(d.label) + xScale.bandwidth() / 2)
          .attr("y", height + 20)
          .text((d) => d.label)
          .attr("text-anchor", "middle")
          .attr("fill", "#fff");
      }

      chart.transition().duration(1000);

      var xAxis = d3.axisBottom(xScale);
      var yAxis = d3.axisLeft(yScale);

      svg
        .append("g")
        .attr("transform", `translate(${margin.left},${chartHeight - margin.bottom})`)
        .call(xAxis);

      svg
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`)
        .call(yAxis);
    }

    function generateLineChart(dataArray, includeNames, includeNumber, chartColor) {
      var chartData = [];

      for (var i = 0; i < dataArray.length; i++) {
        var item = dataArray[i].split(",");
        var value = includeNumber ? parseFloat(item[0]) : item[0];
        var label = includeNames ? item[1] : "";

        chartData.push({
          value: value,
          label: label
        });
      }

      chartContainer.innerHTML = "";

      var svg = d3
        .select("#chartContainer")
        .append("svg")
        .attr("width", "100%")
        .attr("height", "100%");

      var chartWidth = chartContainer.offsetWidth;
      var chartHeight = chartContainer.offsetHeight;
      var margin = {
        top: 20,
        right: 20,
        bottom: 40,
        left: 40
      };
      var width = chartWidth - margin.left - margin.right;
      var height = chartHeight - margin.top - margin.bottom;

      var chart = svg
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      var xScale = d3
        .scaleBand()
        .domain(chartData.map((d) => d.label))
        .range([0, width])
        .padding(0.2);

      var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(chartData, (d) => d.value)])
        .range([height, 0]);

      var line = d3
        .line()
        .x((d) => xScale(d.label) + xScale.bandwidth() / 2)
        .y((d) => yScale(d.value));

      var path = chart
        .append("path")
        .datum(chartData)
        .attr("fill", "none")
        .attr("stroke", chartColor)
        .attr("stroke-width", 2)
        .attr("d", line);

      if (includeNumber) {
        var valueLabels = chart.selectAll(".value-label")
          .data(chartData)
          .enter()
          .append("text")
          .attr("class", "value-label")
          .attr("x", (d) => xScale(d.label) + xScale.bandwidth() / 2)
          .attr("y", (d) => yScale(d.value) - 5)
          .text((d) => d.value)
          .attr("text-anchor", "middle")
          .attr("fill", "#fff");
      }

      if (includeNames) {
        var nameLabels = chart.selectAll(".name-label")
          .data(chartData)
          .enter()
          .append("text")
          .attr("class", "name-label")
          .attr("x", (d) => xScale(d.label) + xScale.bandwidth() / 2)
          .attr("y", height + 20)
          .text((d) => d.label)
          .attr("text-anchor", "middle")
          .attr("fill", "#fff");
      }

      chart.transition().duration(1000);

      var xAxis = d3.axisBottom(xScale);
      var yAxis = d3.axisLeft(yScale);

      svg
        .append("g")
        .attr("transform", `translate(${margin.left},${chartHeight - margin.bottom})`)
        .call(xAxis);

      svg
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`)
        .call(yAxis);
    }

    function generatePieChart(dataArray, includeNames) {
      var chartData = [];

      for (var i = 0; i < dataArray.length; i++) {
        var item = dataArray[i].split(",");
        var value = parseFloat(item[0]);
        var label = includeNames ? item[1] : "";

        chartData.push({
          value: value,
          label: label
        });
      }

      chartContainer.innerHTML = "";

      var svg = d3
        .select("#chartContainer")
        .append("svg")
        .attr("width", "100%")
        .attr("height", "100%");

      var chartWidth = chartContainer.offsetWidth;
      var chartHeight = chartContainer.offsetHeight;
      var margin = {
        top: 20,
        right: 20,
        bottom: 20,
        left: 20
      };
      var width = chartWidth - margin.left - margin.right;
      var height = chartHeight - margin.top - margin.bottom;
      var radius = Math.min(width, height) / 2;

      var chart = svg
        .append("g")
        .attr("transform", `translate(${width / 2},${height / 2})`);

      var colorScale = d3.scaleOrdinal(d3.schemeCategory10);

      var pie = d3.pie()
        .value((d) => d.value)
        .sort(null);

      var arc = d3.arc()
        .innerRadius(0)
        .outerRadius(radius);

      var arcs = chart.selectAll(".arc")
        .data(pie(chartData))
        .enter()
        .append("g")
        .attr("class", "arc");

      arcs.append("path")
        .attr("d", arc)
        .attr("fill", (d, i) => colorScale(i));

      if (includeNames) {
        arcs.append("text")
          .attr("transform", (d) => `translate(${arc.centroid(d)})`)
          .attr("dy", "0.35em")
          .text((d) => d.data.label)
          .attr("text-anchor", "middle")
          .attr("fill", "#fff");
      }
    }

    function zoomIn() {
      var chart = document.getElementById("chartContainer").querySelector("svg");
      var currentWidth = chart.getAttribute("width");
      var currentHeight = chart.getAttribute("height");
      var newWidth = parseInt(currentWidth) * 1.2;
      var newHeight = parseInt(currentHeight) * 1.2;
      chart.setAttribute("width", newWidth);
      chart.setAttribute("height", newHeight);
    }

    function zoomOut() {
      var chart = document.getElementById("chartContainer").querySelector("svg");
      var currentWidth = chart.getAttribute("width");
      var currentHeight = chart.getAttribute("height");
      var newWidth = parseInt(currentWidth) / 1.2;
      var newHeight = parseInt(currentHeight) / 1.2;
      chart.setAttribute("width", newWidth);
      chart.setAttribute("height", newHeight);
    }

    function openModal(modalId) {
      var modal = document.getElementById(modalId);
      modal.style.display = "block";
    }

    function closeModal(modalId) {
      var modal = document.getElementById(modalId);
      modal.style.display = "none";
    }
  </script>
</body>

</html>
